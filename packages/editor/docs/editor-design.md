---
title: 低代码编辑器引擎
order: 1
group:
  path: /
nav:
  title: 设计文档
  order: 3
  path: /design
---

# 低代码编辑器

----

## 1. 修改记录

|作者|更新日期|备注|
|---|---|---|
|胡东亮|2020-07-22|初稿|
|胡东亮|2020-08-19|修改文档结构|

## 2. 引言

### 2.1. 背景介绍

在页面配置过程中，对于现有工具无法配置的部分，需要支持开发人员编写代码实现。因此需要工具能支持低代码编辑器，用于前端编写代码实现业务逻辑。

### 2.2. 业务痛点

1. 过去的 2.x 平台表达式编辑器不支持手动编辑函数，只能从列表中选取。调试功能不友好。
2. 不支持在线编辑代码。

### 2.3. 新编辑器需满足的业务需求

![图片描述](https://cdn.jsdelivr.net/gh/18613109040/editor/public/images/1597910242757_21E6DE06-82D3-4407-8845-8E2EF1036C6A.png)

## 3. 编写目的和范围

- 说明低代码编辑器引擎
- 说明低代码编辑器引擎具有的功能
- 说明技术如何选型

## 4. 技术选型

经过对比和分析目前市面开源编辑器功能和扩展性分析,最终选择 CodeMirror

详细选型文档见 [文档] (/design/editor-selection)

## 5. 核心名词解释

- 低代码编辑器引擎: 可以编辑,语法提示，语法补全, 语法高亮, 自定义主题, 字体大小的代码编辑引擎模块
- 低代码编辑器运行器引擎: 可以模拟一个沙箱环境来运行代码块
- 低代码编辑器: 由低代码编辑器引擎, 低代码编辑器运行器引擎, 运行结果显示模块, 函数模块, 变量模块, 表达式模块 组合成的一个综合功能编辑器

## 5. 低代码编辑器引擎架构

![图片描述] (https://cdn.jsdelivr.net/gh/18613109040/editor/public/images/1597916385723_DFA8FF11-4B67-4B3C-B04A-822015A7DA2C.png)

## 6. 低代码编辑器运行器架构

![图片描述](https://cdn.jsdelivr.net/gh/18613109040/editor/public/images/1597925168600_886B3622-D3A4-4A35-96FA-9DDE5A03FCCD.png)

## 5. 低代码编辑器

![图片描述] (https://cdn.jsdelivr.net/gh/18613109040/editor/public/images/1597925484906_11491E9B-55B8-45E0-99D4-A0949EB96B41.png)

#### 名词解释

- 参数解析器
- 沙箱执行器

##### 参数解析器

功能：解析编辑器函数形参个数

```
function(a,b,c) { return a + b + c }
```

上面函数代码块中出现的`a,b,c`就是要解析器要解析出来的参数。解析过程如下图:

![图片描述](https://www.tapd.cn/tfl/pictures/202008/tapd_41909965_1597281937_14.png)

##### 沙箱执行器

原因: 编辑器里面的代码片段（函数 或者 表达式）需要运行，因此我们需要一个隔离的上下文环境来运行代码。

功能: 在指定的盒子里运行代码。更多描述请查看 [js沙箱](/design/sandbox-design)

## 7. API属性

详细接口属性见文档 [配置项](/api/editor-api)

## 8. 使用

具体使用见 [例子](/example/editor-example)

## 9. 特性

- 多语法支持
- 多主题支持
- 主题支持
- 代码补全
- 代码教程
- 自定义语法支持
