{"version":3,"sources":["webpack:///./src/pages/flow-todo/index.tsx"],"names":["FlowTodo","useState","routeURL","setRouteURL","frame","useRef","location","useLocation","search","getSearchParams","tokenId","clientToken","userId","pInstanceId","taskId","nodeId","flowdata","useEffect","window","baseURL","encodeURIComponent","JSON","stringify","onLoadiFrame","iframeWindow","current","contentWindow","navigator","userAgent","match","iframebody","document","body","style","width","clientWidth","useMemo","overflow","WebkitOverflowScrolling","height","getClintHeight","display"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;;AACA,IAAMA,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAAA,kBACWC,sDAAQ,CAAC,EAAD,CADnB;AAAA;AAAA,MACdC,QADc;AAAA,MACJC,WADI;;AAErB,MAAMC,KAAK,GAAGC,oDAAM,EAApB;AACA,MAAMC,QAAQ,GAAGC,4EAAW,EAA5B;AACA,MAAMC,MAAM,GAAGC,oFAAe,CAACH,QAAQ,CAACE,MAAV,CAA9B;AAJqB,MAKbE,OALa,GAKiDF,MALjD,CAKbE,OALa;AAAA,MAKJC,WALI,GAKiDH,MALjD,CAKJG,WALI;AAAA,MAKSC,MALT,GAKiDJ,MALjD,CAKSI,MALT;AAAA,MAKiBC,WALjB,GAKiDL,MALjD,CAKiBK,WALjB;AAAA,MAK8BC,MAL9B,GAKiDN,MALjD,CAK8BM,MAL9B;AAAA,MAKsCC,MALtC,GAKiDP,MALjD,CAKsCO,MALtC;AAMrB,MAAMC,QAAQ,GAAG;AACfH,eAAW,EAAXA,WADe;AAEfC,UAAM,EAANA,MAFe;AAGfC,UAAM,EAANA;AAHe,GAAjB;AAKAE,yDAAS,CAAC,YAAM;AACdd,eAAW,WACNe,MAAM,CAACC,OAAP,IAAkB,EADZ,uCAC2CC,kBAAkB,CACpEC,IAAI,CAACC,SAAL,CAAeN,QAAf,CADoE,CAD7D,gCAGcN,OAHd,qBAGgCE,MAHhC,2BAGuDD,WAHvD,mBAAX;AAKD,GANQ,EAMN,EANM,CAAT;;AAQA,MAAMY,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAMC,YAAY,GAAGpB,KAAK,CAACqB,OAAN,CAAcC,aAAnC;;AACA,QAAI,CAACC,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,cAA1B,CAAL,EAAgD;AAC9C,aAAO,KAAP;AACD;;AACD,QAAMC,UAAU,GAAGN,YAAY,CAACO,QAAb,CAAsBC,IAAzC;AACAF,cAAU,CAACG,KAAX,CAAiBC,KAAjB,GAAyBH,QAAQ,CAACC,IAAT,CAAcG,WAAd,GAA4B,IAArD;AACD,GAPD;;AAQA,SAAOC,qDAAO,CACZ;AAAA,wBACE,qIACE;AAAK,WAAK,EAAE;AAAEC,gBAAQ,EAAE,QAAZ;AAAsBC,+BAAuB,EAAE,OAA/C;AAAwDJ,aAAK,EAAE,MAA/D;AAAuEK,cAAM,YAAKC,4EAAc,EAAnB;AAA7E;AAAZ,oBACE;AACE,SAAG,EAAEpC,KADP;AAEE,SAAG,EAAEF,QAFP;AAGE,iBAAW,EAAE,CAHf;AAIE,WAAK,EAAE;AAAEgC,aAAK,EAAE,MAAT;AAAiBO,eAAO,EAAE,MAA1B;AAAkCF,cAAM,YAAKC,4EAAc,EAAnB,OAAxC;AAAmEH,gBAAQ,EAAE;AAA7E,OAJT;AAKE,eAAS,EAAC,IALZ;AAME,YAAM,EAAEd;AANV,MADF,CADF,CADF;AAAA,GADY,EAeZ,CAACrB,QAAD,CAfY,CAAd;AAiBD,CA5CD;;AA8CeF,uEAAf,E","file":"static/js/flowTodo.7fc848a8.js","sourcesContent":["import React, { useEffect, useState, useMemo, useRef, ReactElement } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport { getHost, getClintHeight } from \"@/utils/common\";\r\nimport getSearchParams from \"@/utils/tools/getSearchParams\";\r\nconst FlowTodo = () => {\r\n  const [routeURL, setRouteURL] = useState(\"\");\r\n  const frame = useRef<HTMLIFrameElement>();\r\n  const location = useLocation();\r\n  const search = getSearchParams(location.search);\r\n  const { tokenId, clientToken, userId, pInstanceId, taskId, nodeId } = search;\r\n  const flowdata = {\r\n    pInstanceId,\r\n    taskId,\r\n    nodeId\r\n  };\r\n  useEffect(() => {\r\n    setRouteURL(\r\n      `${window.baseURL || \"\"}/FlowMobile/home?flowdata=${encodeURIComponent(\r\n        JSON.stringify(flowdata)\r\n      )}&type=todo&tokenId=${tokenId}&userId=${userId}&client_token=${clientToken}&clintType=wx`\r\n    );\r\n  }, []);\r\n\r\n  const onLoadiFrame = () => {\r\n    const iframeWindow = frame.current.contentWindow;\r\n    if (!navigator.userAgent.match(/iPad|iPhone/i)) {\r\n      return false;\r\n    }\r\n    const iframebody = iframeWindow.document.body;\r\n    iframebody.style.width = document.body.clientWidth + \"px\";\r\n  };\r\n  return useMemo(\r\n    () => (\r\n      <>\r\n        <div style={{ overflow: \"scroll\", WebkitOverflowScrolling: \"touch\", width: \"100%\", height: `${getClintHeight()}px` }}>\r\n          <iframe\r\n            ref={frame}\r\n            src={routeURL}\r\n            frameBorder={0}\r\n            style={{ width: \"100%\", display: \"flex\", height: `${getClintHeight()}px`, overflow: \"visible\" }}\r\n            scrolling=\"no\"\r\n            onLoad={onLoadiFrame}\r\n          />\r\n        </div>\r\n      </>\r\n    ),\r\n    [routeURL]\r\n  );\r\n};\r\n\r\nexport default FlowTodo;\r\n"],"sourceRoot":""}