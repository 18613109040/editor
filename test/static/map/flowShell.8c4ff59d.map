{"version":3,"sources":["webpack:///./src/pages/flow-shell/index.tsx"],"names":["FlowShell","useState","routeURL","setRouteURL","frame","useRef","useParams","id","name","tokenId","storage","getItem","userId","client_token","useEffect","window","baseURL","encodeURIComponent","dayjs","format","onLoadiFrame","iframeWindow","current","contentWindow","navigator","userAgent","match","iframebody","document","body","style","width","clientWidth","useMemo","overflow","WebkitOverflowScrolling","height","getClintHeight","display"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;AACA,IAAMA,SAAS,GAAG,SAAZA,SAAY,GAAoB;AAAA,kBACJC,sDAAQ,CAAC,EAAD,CADJ;AAAA;AAAA,MAC7BC,QAD6B;AAAA,MACnBC,WADmB;;AAEpC,MAAMC,KAAK,GAAGC,oDAAM,EAApB;;AAFoC,mBAGfC,0EAAS,EAHM;AAAA,MAG5BC,EAH4B,cAG5BA,EAH4B;AAAA,MAGxBC,IAHwB,cAGxBA,IAHwB;;AAIpC,MAAMC,OAAO,GAAGC,8DAAO,CAACC,OAAR,CAAgB,WAAhB,CAAhB;AACA,MAAMC,MAAM,GAAGF,8DAAO,CAACC,OAAR,CAAgB,QAAhB,CAAf;AACA,MAAME,YAAY,GAAGH,8DAAO,CAACC,OAAR,CAAgB,cAAhB,CAArB;AAEAG,yDAAS,CAAC,YAAM;AACdX,eAAW,WACNY,MAAM,CAACC,OAAP,IAAkB,EADZ,4CACgDC,kBAAkB,WACtET,IADsE,eAC7DU,4CAAK,GAAGC,MAAR,CAAe,qBAAf,CAD6D,OADlE,wBAGMZ,EAHN,kCAGgCE,OAHhC,qBAGkDG,MAHlD,2BAGyEC,YAHzE,mBAAX;AAKD,GANQ,EAMN,EANM,CAAT;;AAQA,MAAMO,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,QAAMC,YAAY,GAAGjB,KAAK,CAACkB,OAAN,CAAcC,aAAnC;;AACA,QAAI,CAACC,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,cAA1B,CAAL,EAAgD;AAC9C,aAAO,KAAP;AACD;;AACD,QAAMC,UAAU,GAAGN,YAAY,CAACO,QAAb,CAAsBC,IAAzC;AACAF,cAAU,CAACG,KAAX,CAAiBC,KAAjB,GAAyBH,QAAQ,CAACC,IAAT,CAAcG,WAAd,GAA4B,IAArD;AACD,GAPD;;AAQA,SAAOC,qDAAO,CACZ;AAAA,wBACE,qIACE;AAAK,WAAK,EAAE;AAAEC,gBAAQ,EAAE,QAAZ;AAAsBC,+BAAuB,EAAE,OAA/C;AAAwDJ,aAAK,EAAE,MAA/D;AAAuEK,cAAM,YAAKC,4EAAc,EAAnB;AAA7E;AAAZ,oBACE;AACE,SAAG,EAAEjC,KADP;AAEE,SAAG,EAAEF,QAFP;AAGE,iBAAW,EAAE,CAHf;AAIE,WAAK,EAAE;AAAE6B,aAAK,EAAE,MAAT;AAAiBO,eAAO,EAAE,MAA1B;AAAkCF,cAAM,YAAKC,4EAAc,EAAnB,OAAxC;AAAmEH,gBAAQ,EAAE;AAA7E,OAJT;AAKE,eAAS,EAAC,IALZ;AAME,YAAM,EAAEd;AANV,MADF,CADF,CADF;AAAA,GADY,EAeZ,CAAClB,QAAD,CAfY,CAAd;AAiBD,CAzCD;;AA2CeF,wEAAf,E","file":"static/js/flowShell.7fc848a8.js","sourcesContent":["import React, { useEffect, useState, useMemo, useRef, ReactElement } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport dayjs from \"dayjs\";\r\nimport storage from \"@/utils/storage\";\r\nimport { getHost, getClintHeight } from \"@/utils/common\";\r\nconst FlowShell = (): ReactElement => {\r\n  const [routeURL, setRouteURL] = useState(\"\");\r\n  const frame = useRef<HTMLIFrameElement>();\r\n  const { id, name } = useParams();\r\n  const tokenId = storage.getItem(\"userToken\");\r\n  const userId = storage.getItem(\"userId\");\r\n  const client_token = storage.getItem(\"client_token\");\r\n\r\n  useEffect(() => {\r\n    setRouteURL(\r\n      `${window.baseURL || \"\"}/FlowMobile/home?pInstanceName=${encodeURIComponent(\r\n        `${name} (${dayjs().format(\"YYYY-MM-DD HH:mm:ss\")})`\r\n      )}&pModuleId=${id}&type=create&tokenId=${tokenId}&userId=${userId}&client_token=${client_token}&clintType=wx`\r\n    );\r\n  }, []);\r\n\r\n  const onLoadiFrame = () => {\r\n    const iframeWindow = frame.current.contentWindow;\r\n    if (!navigator.userAgent.match(/iPad|iPhone/i)) {\r\n      return false;\r\n    }\r\n    const iframebody = iframeWindow.document.body;\r\n    iframebody.style.width = document.body.clientWidth + \"px\";\r\n  };\r\n  return useMemo(\r\n    () => (\r\n      <>\r\n        <div style={{ overflow: \"scroll\", WebkitOverflowScrolling: \"touch\", width: \"100%\", height: `${getClintHeight()}px` }}>\r\n          <iframe\r\n            ref={frame}\r\n            src={routeURL}\r\n            frameBorder={0}\r\n            style={{ width: \"100%\", display: \"flex\", height: `${getClintHeight()}px`, overflow: \"visible\" }}\r\n            scrolling=\"no\"\r\n            onLoad={onLoadiFrame}\r\n          />\r\n        </div>\r\n      </>\r\n    ),\r\n    [routeURL]\r\n  );\r\n};\r\n\r\nexport default FlowShell;\r\n"],"sourceRoot":""}