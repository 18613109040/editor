{"version":3,"sources":["webpack:///./src/pages/chooseAddress/index.tsx"],"names":["ChooseAddress","inject","stores","store","chooseAddressStore","observer","event","loc","data","module","pathname","props","history","goBack","storage","setItem","JSON","stringify","initStore","height","Math","max","document","documentElement","clientHeight","body","location","state","params","latlng","lat","lng","coord","window","addEventListener","onMessage","removeEventListener","url","React","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;IAYMA,a,WAJLC,iEAAM,CAAC,UAACC,MAAD;AAAA,SAAqB;AAC3BC,SAAK,EAAED,MAAM,CAACE;AADa,GAArB;AAAA,CAAD,C,gBAGNC,mE;;;;;;;;;;;;;;;;gEAkBa,UAACC,KAAD,EAAyB;AACnC,UAAMC,GAAG,GAAGD,KAAK,CAACE,IAAlB;;AACA,UAAID,GAAG,IAAIA,GAAG,CAACE,MAAJ,IAAc,gBAAzB,EAA2C;AAAA,YACjCC,QADiC,GACpB,MAAKC,KAAL,CAAWR,KADS,CACjCO,QADiC,EAEzC;;AACA,cAAKC,KAAL,CAAWC,OAAX,CAAmBC,MAAnB;;AACAC,sEAAO,CAACC,OAAR,CAAgB,iBAAhB,EAAmCC,IAAI,CAACC,SAAL,CAAeV,GAAf,CAAnC;AACD;AACF,K;;;;;;;wCAxBmB;AAAA,UACVW,SADU,GACI,KAAKP,KAAL,CAAWR,KADf,CACVe,SADU;AAElB,UAAMC,MAAM,GAAGC,IAAI,CAACC,GAAL,CAASC,QAAQ,CAACC,eAAT,CAAyBC,YAAlC,EAAgDF,QAAQ,CAACG,IAAT,CAAcD,YAA9D,CAAf;AAFkB,kCASd,KAAKb,KAAL,CAAWe,QAAX,CAAoBC,KATN;AAAA,UAKhBjB,QALgB,yBAKhBA,QALgB;AAAA,yDAMhBkB,MANgB,CAOdC,MAPc;AAAA,UAOJC,GAPI,0BAOJA,GAPI;AAAA,UAOCC,GAPD,0BAOCA,GAPD;AAUlB,UAAMC,KAAK,aAAMF,GAAN,cAAaC,GAAb,CAAX;AACAb,eAAS,CAAC;AAAEC,cAAM,EAANA,MAAF;AAAUa,aAAK,EAALA,KAAV;AAAiBtB,gBAAQ,EAARA;AAAjB,OAAD,CAAT;AAEAuB,YAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKC,SAAxC,EAAmD,KAAnD;AACD;;;2CAWsB;AACrBF,YAAM,CAACG,mBAAP,CAA2B,SAA3B,EAAsC,KAAKD,SAA3C;AACD;;;6BAEQ;AAAA,8BACmB,KAAKxB,KAAL,CAAWR,KAD9B;AAAA,UACCgB,MADD,qBACCA,MADD;AAAA,UACSa,KADT,qBACSA,KADT;AAEP,UAAMK,GAAG,2EAAoEL,KAApE,uEAAT;AACA,0BAAO;AAAQ,aAAK,EAAC,MAAd;AAAqB,cAAM,EAAEb,MAA7B;AAAqC,WAAG,EAAEkB;AAA1C,QAAP;AACD;;;;EAlCyBC,4CAAK,CAACC,S;AAoCnBvC,4EAAf,E","file":"static/js/chooseAddress.7fc848a8.js","sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\nimport React from \"react\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport storage from \"@/utils/storage\";\r\nimport { IChooseAddressStore } from \"@/stores/index\";\r\ntype IProps = {\r\n  store: IChooseAddressStore;\r\n  location: Location;\r\n  history: History;\r\n};\r\n\r\n@inject((stores: Stores) => ({\r\n  store: stores.chooseAddressStore\r\n}))\r\n@observer\r\nclass ChooseAddress extends React.Component<IProps> {\r\n  componentDidMount() {\r\n    const { initStore } = this.props.store;\r\n    const height = Math.max(document.documentElement.clientHeight, document.body.clientHeight);\r\n\r\n    const {\r\n      pathname,\r\n      params: {\r\n        latlng: { lat, lng }\r\n      }\r\n    } = this.props.location.state;\r\n    const coord = `${lat},${lng}`;\r\n    initStore({ height, coord, pathname });\r\n\r\n    window.addEventListener(\"message\", this.onMessage, false);\r\n  }\r\n\r\n  onMessage = (event: MessageEvent) => {\r\n    const loc = event.data;\r\n    if (loc && loc.module == \"locationPicker\") {\r\n      const { pathname } = this.props.store;\r\n      // this.props.history.replace({ pathname, state: loc });\r\n      this.props.history.goBack();\r\n      storage.setItem(\"meetinglocation\", JSON.stringify(loc));\r\n    }\r\n  };\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"message\", this.onMessage);\r\n  }\r\n\r\n  render() {\r\n    const { height, coord } = this.props.store;\r\n    const url = `https://apis.map.qq.com/tools/locpicker?search=1&type=1&coord=${coord}&key=LISBZ-ENWR3-IWM3I-36GL5-VFNU7-SBBCV&referer=EnterpriseWXHYSUI`;\r\n    return <iframe width=\"100%\" height={height} src={url}></iframe>;\r\n  }\r\n}\r\nexport default ChooseAddress;\r\n"],"sourceRoot":""}